<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>WARM UP UK HOMES — Contract</title>
<meta name="color-scheme" content="dark"/>
<style>
  :root{
    --bg:#0a0a0a; --panel:#121212; --ink:#f7f7f7; --muted:#b9b9b9;
    --gold:#d4af37; --gold-soft:#ffd766; --line:#222;
    --radius:16px; --shadow:0 10px 28px rgba(0,0,0,.55);
    --sans:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;font-family:var(--sans);color:var(--ink);background:var(--bg)}

  .wrap{max-width:1100px;margin:0 auto;padding:18px}

  /* HEADER */
  <header>
  <div class="logo-section" style="display:flex;align-items:center;justify-content:center;flex-direction:column;margin-bottom:15px;">
    <img src="11A155C8-468D-489E-816B-13E581F6F652.png" alt="Warm Up UK Logo" style="width:120px;height:auto;margin-bottom:10px;">
    <h1 style="color:#fff;margin:0;">WARM UP UK HOMES</h1>
    <p style="color:#d4af37;margin:2px 0 0;font-weight:500;">Fitzwilliam House, Middle Bank, Doncaster, England, DN4 5NG</p>
    <p style="color:#d4af37;margin:0;">07470 474774 · warmupuk@icloud.com</p>
    <p style="color:#aaa;margin-top:8px;font-size:14px;">Contract Number: <span id="contractNumber"></span> · Date: <span id="contractDate"></span></p>
  </div>
</header>

<script>
  // Auto-generate contract number and date
  document.addEventListener("DOMContentLoaded", () => {
    const num = Math.floor(Math.random() * 90000) + 10000;
    document.getElementById("contractNumber").textContent = num;
    const today = new Date();
    document.getElementById("contractDate").textContent = today.toLocaleDateString('en-GB', {
      day: '2-digit', month: 'short', year: 'numeric'
    });
  });
</script>
  }
  .brand{display:flex;align-items:center;gap:16px;flex-wrap:wrap}
  .brand img{height:72px;width:auto;display:block;border-radius:12px}
  .title{font-weight:900;letter-spacing:.22em;text-transform:uppercase;font-size:clamp(18px,3.1vw,28px)}
  .company{margin-left:auto;font-size:13px;line-height:1.5;color:var(--muted)}
  .company strong{color:var(--gold)}
  .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
  .btn{
    padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.16);
    background:linear-gradient(180deg,var(--gold),var(--gold-soft));
    color:#101010;font-weight:800;cursor:pointer;text-decoration:none
  }
  .btn.ghost{background:transparent;color:var(--ink);border-color:rgba(212,175,55,.55)}

  /* CARDS / FORMS */
  .card{
    background:linear-gradient(180deg,rgba(255,255,255,.02),transparent),var(--panel);
    border:1px solid rgba(255,255,255,.08);
    border-radius:var(--radius);
    padding:16px;
    box-shadow:var(--shadow);
    margin-top:14px
  }
  h2{margin:0 0 10px 0;font-size:16px;text-transform:uppercase;letter-spacing:.12em;color:var(--gold)}
  label{display:block;font-size:13px;color:var(--muted);margin:10px 0 6px}
  input,select,textarea{
    width:100%;padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.14);
    background:#0c0c0c;color:var(--ink);outline:none
  }
  textarea{min-height:120px;resize:vertical}
  .grid{display:grid;gap:12px;grid-template-columns:repeat(2,1fr)}
  @media(max-width:900px){.grid{grid-template-columns:1fr}}

  /* ITEMS TABLE */
  .rows-head,.row{display:grid;grid-template-columns:2fr 1fr 1fr 1fr auto;gap:8px}
  .rows-head{color:var(--muted);font-size:12px;margin-bottom:6px}
  .row{margin-bottom:8px}
  .row input[type="number"]{text-align:right}

  /* TOTALS */
  .tot-line{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border:1px solid var(--line);border-radius:12px}
  .money-input{width:220px;max-width:100%;text-align:right;background:#0a0a0a;color:var(--ink);border-radius:12px;border:1px solid rgba(212,175,55,.7);padding:10px 12px;font-weight:700}

  /* SIGNATURE */
  .sig-wrap{border:1px solid rgba(255,255,255,.18);border-radius:12px;background:#0c0c0c;padding:10px}
  canvas#sig{display:block;width:100%;height:240px;max-height:240px;background:#0c0c0c;border-radius:8px;touch-action:none}
  .sig-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:8px}

  footer{margin-top:8px;color:var(--muted);font-size:12px;text-align:center}

  @media print{
    .btn,.no-print{display:none!important}
    header{position:static}
  }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="brand">
      <img src="assets/wuuk-logo.png" alt="Warm Up UK Homes Logo"
           onerror="this.src='/Warmup-uk-app/assets/wuuk-logo.png'">
      <div class="title">WARM UP UK HOMES</div>
      <div class="company">
        <strong>Office</strong> · Fitzwilliam House, Middle Bank, Doncaster, England, DN4 5NG<br>
        <strong>Tel</strong> 07470 474 774 · <strong>Email</strong> warmupuk@icloud.com
      </div>
    </div>

    <div class="grid" style="margin-top:10px">
      <div><label>Contract Number</label><input id="contractNo" placeholder="WUUK-YYYYMMDD-XXXX"></div>
      <div><label>Date</label><input id="date" type="date"></div>
    </div>

    <div class="actions no-print">
      <button class="btn" id="btnPrint">Print / Save PDF</button>
      <button class="btn ghost" id="btnShare">Share via WhatsApp</button>
    </div>
  </header>

  <main>
    <section class="card">
      <h2>Client & Job Details</h2>
      <div class="grid">
        <div><label>Client name</label><input id="client" placeholder="Full name"></div>
        <div><label>Contact number (WhatsApp)</label><input id="phone" placeholder="+44… or 07…"></div>
        <div><label>Property address</label><input id="address" placeholder="Address, Postcode"></div>
        <div><label>Rep</label><input id="rep" placeholder="Rep name"></div>
        <div><label>Job type</label>
          <select id="job"><option>Loft Insulation</option><option>Multifoil Insulation</option><option>Underfloor Insulation</option></select>
        </div>
        <div><label>Date of install</label><input id="installDate" type="date"></div>
      </div>
    </section>

    <section class="card">
      <h2>Products & Pricing</h2>
      <div class="rows-head"><div>Description</div><div>Qty</div><div>Unit £</div><div>Line £</div><div></div></div>
      <div id="items"></div>
      <div class="no-print" style="display:flex;justify-content:flex-end;margin-top:6px;">
        <button class="btn ghost" id="addRow">+ Add line</button>
      </div>

      <div class="grid" style="margin-top:12px">
        <div><label style="display:flex;align-items:center;gap:8px;"><input type="checkbox" id="vatOn" checked> Apply VAT (20%)</label></div>
        <div class="tot-line"><span>Subtotal</span><strong id="sub">£0.00</strong></div>
        <div class="tot-line"><span>VAT</span><strong id="vat">£0.00</strong></div>
        <div class="tot-line"><span>Total</span><strong id="total">£0.00</strong></div>
        <div><label>Deposit £</label><input id="deposit" type="number" class="money-input" value="0"></div>
        <div style="font-weight:900;color:var(--gold);font-size:20px;">Balance Due: <span id="balance">£0.00</span></div>
      </div>
    </section>

    <section class="card">
      <h2>Notes / Instructions</h2>
      <textarea id="notes" placeholder="Write any installation notes or client instructions here..."></textarea>
    </section>

    <section class="card">
      <h2>Signature</h2>
      <div class="sig-wrap">
        <canvas id="sig" width="1200" height="600"></canvas>
      </div>
      <div class="sig-actions no-print">
        <button class="btn ghost" id="clearSig">Clear</button>
      </div>
    </section>

    <footer class="no-print">© WARM UP UK HOMES</footer>
  </main>
</div>

<script>
const $=id=>document.getElementById(id);
const money=n=>'£'+(Math.round((+n||0)*100)/100).toLocaleString(undefined,{minimumFractionDigits:2});
const items=$('items');

/* Add item rows */
function addRow(desc='',qty=1,unit=0){
  const r=document.createElement('div'); r.className='row';
  r.innerHTML=`<input value="${desc}" placeholder="Description">
               <input type="number" class="qty" value="${qty}">
               <input type="number" class="unit" value="${unit}">
               <input class="sum" value="0.00" readonly>
               <button class="btn ghost remove" type="button">×</button>`;
  items.appendChild(r);
  r.querySelectorAll('.qty,.unit').forEach(el=>el.addEventListener('input',calc));
  r.querySelector('.remove').onclick=()=>{r.remove();calc()};
  calc();
}
$('addRow').onclick=()=>addRow();
addRow('Loft insulation — supply & fit',1,1000);

/* Totals */
const sub=$('sub'),vat=$('vat'),tot=$('total'),dep=$('deposit'),bal=$('balance');
$('vatOn').onchange=calc; dep.oninput=calc;
function calc(){
  let s=0;
  items.querySelectorAll('.row').forEach(r=>{
    const q=+r.querySelector('.qty').value||0;
    const u=+r.querySelector('.unit').value||0;
    const line=q*u;
    r.querySelector('.sum').value=line.toFixed(2);
    s+=line;
  });
  const v=$('vatOn').checked?s*0.2:0;
  const t=s+v;
  const d=+dep.value||0;
  const b=Math.max(0,t-d);
  sub.textContent=money(s); vat.textContent=money(v); tot.textContent=money(t); bal.textContent=money(b);
}
calc();

/* Contract number + dates */
function genNo(){
  const dt=new Date();
  const y=dt.getFullYear(), m=String(dt.getMonth()+1).padStart(2,'0'), d=String(dt.getDate()).padStart(2,'0');
  const key='wuuk_seq', seq=(+localStorage.getItem(key)||0)+1; localStorage.setItem(key,seq);
  return `WUUK-${y}${m}${d}-${String(seq).padStart(4,'0')}`;
}
if(!$('contractNo').value) $('contractNo').value=genNo();
$('date').value=new Date().toISOString().slice(0,10);

/* Signature Pad (stable) */
const c=$('sig'), ctx=c.getContext('2d'); let drawing=false, last=null;
function pos(e){const r=c.getBoundingClientRect(); const t=e.touches?e.touches[0]:e; return {x:(t.clientX-r.left)*(c.width/r.width), y:(t.clientY-r.top)*(c.height/r.height)};}
function start(e){drawing=true; last=pos(e); e.preventDefault();}
function move(e){ if(!drawing) return; const p=pos(e); ctx.beginPath(); ctx.moveTo(last.x,last.y); ctx.lineTo(p.x,p.y); ctx.strokeStyle='#d4af37'; ctx.lineWidth=2.2; ctx.lineCap='round'; ctx.stroke(); last=p; e.preventDefault();}
function end(){drawing=false;}
['mousedown','touchstart'].forEach(ev=>c.addEventListener(ev,start,{passive:false}));
['mousemove','touchmove'].forEach(ev=>c.addEventListener(ev,move,{passive:false}));
['mouseup','mouseleave','touchend'].forEach(ev=>c.addEventListener(ev,end));
$('clearSig').onclick=()=>ctx.clearRect(0,0,c.width,c.height);

/* Print */
$('btnPrint').onclick=()=>window.print();

/* WhatsApp share (text summary) */
$('btnShare').onclick=()=>{
  const msg=`WARM UP UK HOMES CONTRACT
Contract: ${$('contractNo').value}
Date: ${$('date').value}
Client: ${$('client').value}
Phone: ${$('phone').value}
Address: ${$('address').value}
Job: ${$('job').value} on ${$('installDate').value||$('date').value}

Subtotal: ${sub.textContent}
VAT: ${vat.textContent}
Total: ${tot.textContent}
Deposit: £${(+dep.value||0).toFixed(2)}
Balance: ${bal.textContent}

Notes: ${$('notes').value}`;
  window.open('https://wa.me/?text='+encodeURIComponent(msg),'_blank');
};
</script>
</body>
</html>
