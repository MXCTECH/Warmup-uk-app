<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Warm Up UK Calendar</title>
<style>
  body { font-family: Arial, sans-serif; background:#111; color:#f5f5f5; margin:0; padding:20px;}
  .container { max-width: 600px; margin:auto; background:#1e1e1e; padding:20px; border-radius:10px;}
  label {display:block; margin:8px 0 4px;}
  input, textarea, select {width:100%; padding:8px; border-radius:6px; border:none; margin-bottom:10px;}
  button {padding:12px; width:100%; border:none; border-radius:6px; background:#d4af37; color:#111; font-weight:bold; cursor:pointer;}
</style>
</head>
<body>
<div class="container">
  <h1>ðŸ“… Calendar Booking</h1>

  <label>Name</label>
  <input id="name" type="text">

  <label>Phone (WhatsApp)</label>
  <input id="phone" type="text" placeholder="+447...">

  <label>Address</label>
  <textarea id="address"></textarea>

  <label>Date</label>
  <input id="date" type="date">

  <label>Time</label>
  <input id="time" type="time">

  <label>Service</label>
  <select id="service">
    <option>Loft Insulation</option>
    <option>Spray Foam Removal</option>
    <option>Boiler Service</option>
    <option>Multifoil Installation</option>
  </select>

  <label>Price (Â£)</label>
  <input id="price" type="number">

  <label>Notes</label>
  <textarea id="notes"></textarea>

  <button onclick="sendWhatsApp()">Send to WhatsApp</button>
</div>

<script>
function sendWhatsApp(){
  const name = document.getElementById('name').value.trim();
  const phoneRaw = document.getElementById('phone').value.trim();
  const phone = phoneRaw.replace(/\D/g,''); // WhatsApp needs digits only
  const address = document.getElementById('address').value.trim();
  const date = document.getElementById('date').value;
  const time = document.getElementById('time').value;
  const service = document.getElementById('service').value;
  const price = document.getElementById('price').value;
  const notes = document.getElementById('notes').value;

  if(!phone || !name){ alert("Enter at least name and WhatsApp number"); return; }

  // Contract link with query params
  const contractUrl = `https://warmupuk.github.io/contract.html?name=${encodeURIComponent(name)}&phone=${encodeURIComponent(phone)}&address=${encodeURIComponent(address)}&date=${encodeURIComponent(date+' '+time)}&product=${encodeURIComponent(service)}&price=${encodeURIComponent(price)}&notes=${encodeURIComponent(notes)}`;

  const msg = `Hello ${name}, here is your Warm Up UK contract:\n${contractUrl}`;

  const waLink = `https://wa.me/${phone}?text=${encodeURIComponent(msg)}`;
  
  window.location.href = waLink;
}
</script>
</body>
</html>
<script>
  // Helper enc
  const enc = s => encodeURIComponent((s || '').trim());

  // Get values from your fields (adjust selectors if your names differ)
  function readBooking() {
    return {
      name:    document.querySelector('[name="name"]').value,
      phone:   document.querySelector('[name="phone"]').value,   // WhatsApp phone
      address: document.querySelector('[name="address"]').value,
      date:    document.querySelector('[name="date"]').value,
      time:    document.querySelector('[name="time"]').value,
      service: document.querySelector('[name="service"]').value,
      price:   document.querySelector('[name="price"]').value || '0',
      notes:   document.querySelector('[name="notes"]').value
    };
  }

  // Open Contract (prefilled)
  document.getElementById('btnToContract')?.addEventListener('click', () => {
    const b = readBooking();

    // Save for fallback
    localStorage.setItem('wu_latest_client', JSON.stringify(b));

    // Also pass as URL params
    const url = `./contract.html?name=${enc(b.name)}&phone=${enc(b.phone)}&address=${enc(b.address)}&date=${enc(b.date)}&time=${enc(b.time)}&service=${enc(b.service)}&price=${enc(b.price)}&notes=${enc(b.notes)}&v=2`;
    window.location.href = url; // or window.open(url, '_blank')
  });
</script>
