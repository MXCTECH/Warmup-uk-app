<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Warm Up UK Homes Limited – Contract</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.7/dist/signature_pad.umd.min.js"></script>

<style>
:root{
  --black:#0f1114;
  --gold:#d9b15a;
  --bg:#0b0d10;
  --panel:#ffffff;
  --red:#b80000;
}
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
html,body{
  margin:0;
  background:var(--bg);
  overscroll-behavior-y:contain;
  overflow-x:hidden;
}
.page{
  max-width:920px;
  margin:16px auto 24px;
  background:var(--panel);
  border:1px solid rgba(217,177,90,0.35);
  border-radius:14px;
  box-shadow:0 12px 28px rgba(0,0,0,0.35);
  overflow:hidden;
}
header{
  background:var(--black);
  color:var(--gold);
  text-align:center;
  padding:12px 10px 7px;
  font-weight:600;
  letter-spacing:.08em;
  text-transform:uppercase;
}
.subheader{
  text-align:center;
  background:#fff;
  color:#1d1d1d;
  font-size:11.5px;
  padding:8px 14px 9px;
  border-bottom:1px solid rgba(0,0,0,0.04);
  line-height:1.35;
}
.inner{padding:14px 16px 16px}
.section-title{
  margin:16px 0 10px;
  font-size:12.4px;
  text-transform:uppercase;
  color:var(--black);
  display:flex;
  align-items:center;
  gap:7px;
  font-weight:700;
}
.section-title::before{
  content:'';
  width:4px;
  height:14px;
  background:var(--gold);
  border-radius:2px;
}
.row{display:flex;gap:10px;flex-wrap:wrap}
.col{flex:1 1 180px;min-width:150px}
label{display:block;font-size:10.8px;margin-bottom:4px;text-transform:uppercase;color:#363a3e}
input,select,textarea{
  width:100%;padding:6px 8px;border:1px solid rgba(15,17,20,0.08);
  background:rgba(236,239,244,0.45);border-radius:7px;font-size:12.5px;
}
input:focus,select:focus,textarea:focus{
  outline:none;background:#fff;border:1px solid rgba(217,177,90,0.6);
  box-shadow:0 0 0 2px rgba(217,177,90,0.12);
}
textarea{min-height:65px}

/* products */
.table-wrap{width:100%;overflow-x:auto;border:1px solid rgba(0,0,0,0.02);border-radius:8px}
table{width:100%;border-collapse:collapse;margin-top:0;font-size:12px}
th,td{border:1px solid rgba(0,0,0,0.02);padding:5px 6px;background:#fff}
th{background:rgba(12,13,14,0.04);color:#3b3e42;text-transform:uppercase;font-size:10.2px}

/* buttons */
button{
  background:var(--black);color:#fff;border:1px solid rgba(217,177,90,0.4);
  padding:7px 12px;border-radius:7px;font-size:12.5px;cursor:pointer;transition:.12s ease-in-out;
  display:inline-flex;gap:6px;align-items:center;justify-content:center;
}
button:hover{background:#15181c}
button.secondary{background:rgba(15,17,20,0.04);color:#2a2e32;border:1px solid rgba(15,17,20,0.05)}
.btn-row{margin:10px 0;display:flex;gap:8px;flex-wrap:wrap}

/* totals / terms */
.totals-terms-row{display:flex;gap:12px;margin-top:10px;flex-wrap:wrap;align-items:flex-start}
.totals-box{
  flex:0 0 240px;border:1px solid rgba(217,177,90,0.25);border-radius:9px;
  background:#fff;font-size:10.6px;box-shadow:0 3px 12px rgba(0,0,0,0.03);
}
.totals-box div{display:flex;justify-content:space-between;align-items:center;padding:4px 7px 3px;gap:6px}
.totals-box div:nth-child(odd){background:#f8f4eb}
.totals-box input{width:62px;text-align:right;font-size:11px;background:#fff}
.totals-box .grand{
  background:var(--black);color:var(--gold);font-weight:700;font-size:11.6px;
  padding:6px 7px;border-bottom-left-radius:9px;border-bottom-right-radius:9px;
}
.terms-inline{
  flex:1 1 0;border:1px solid rgba(217,177,90,0.35);background:#fff;
  padding:8px 10px 9px;font-size:10.4px;line-height:1.28;min-width:280px;border-radius:9px;
}
.terms-inline strong{display:block;margin-bottom:3px;color:var(--black)}

/* waiver */
.waiver{margin-top:10px;border:1px solid rgba(184,0,0,0.35);background:rgba(184,0,0,0.04);padding:8px 9px;border-radius:9px}
.waiver-title{font-weight:700;color:var(--red);text-transform:uppercase;font-size:11.2px;margin-bottom:4px}
@keyframes flashRed{0%{box-shadow:0 0 0 0 rgba(184,0,0,0.2)}50%{box-shadow:0 0 16px 6px rgba(184,0,0,0.55)}100%{box-shadow:0 0 0 0 rgba(184,0,0,0.2)}}
.waiver.flash{animation:flashRed 1s ease-in-out infinite alternate}

/* signatures */
.signature-area{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
.sig-box{flex:1 1 260px;display:flex;flex-direction:column;gap:4px;background:#f7f8fa;border:1px solid rgba(0,0,0,0.02);border-radius:9px;padding:6px}
.sig-pad{border:1px dashed rgba(0,0,0,0.25);width:100%;height:110px;border-radius:7px;background:#fff;touch-action:none}
.sig-img{display:none;max-width:100%;border:1px dashed rgba(0,0,0,0.15);border-radius:7px}
.sig-note{font-size:10px;color:#6b6f73}
.page-break{margin-top:160px}
footer{background:var(--black);color:var(--gold);text-align:center;padding:8px;font-weight:600;text-transform:uppercase;font-size:11px}

/* mobile */
@media(max-width:700px){
  input,select,textarea{font-size:16px}
  .page{border:none;border-radius:0;box-shadow:none;margin:0}
  .totals-terms-row{flex-direction:column}
  .totals-box{width:100%;max-width:100%;flex:1 1 100%}
  .terms-inline{width:100%;min-width:100%}
  .signature-area{flex-direction:column}
  .sig-box{width:100%}
  button{flex:1}
}

/* print */
@media print{
  body{background:#fff!important}
  .page{border:none;margin:0;width:100%;border-radius:0;background:#fff!important;box-shadow:none;transform:scale(0.95);transform-origin:top left}
  header{background:#000!important;color:#d9b15a!important}
  button{display:none!important}
  .totals-terms-row{display:block}
  .totals-box{width:100%;max-width:100%;background:#fff}
  .terms-inline{width:100%;min-width:100%;margin-top:4px;background:#fff}
  .section-title{margin:10px 0 4px;font-size:11.5px}
  .waiver{page-break-inside:avoid;padding:4px 5px;font-size:9.5px;margin-top:5px;max-height:90px;overflow:hidden;background:#fff}
  .waiver-title{font-size:10px;margin-bottom:2px}
  #waiverNotes,#expressBtn{display:none!important}
  .page-break{page-break-before:always;margin-top:90pt}
}
</style>
</head>
<body>
<div class="page" id="contractPage">
  <header>WARM UP UK HOMES LIMITED</header>

  <div class="subheader">
    Fitzwilliam House, Middle Bank, Doncaster, England, DN4&nbsp;5NG · Tel: <strong>07470&nbsp;474&nbsp;774</strong> · Email: <strong>danielle@warmuphomes.co.uk</strong>
  </div>

  <div class="inner">
    <h2 class="section-title">Client details</h2>
    <div class="row">
      <div class="col"><label>Name</label><input id="clientName" placeholder="Full name"></div>
      <div class="col"><label>Address</label><input id="clientAddress" placeholder="Installation address"></div>
      <div class="col"><label>Postcode</label><input id="clientPostcode" placeholder="Postcode"></div>
      <div class="col"><label>Phone</label><input id="clientPhone" placeholder="Contact number"></div>
    </div>
    <div class="row">
      <div class="col"><label>Email</label><input id="clientEmail" placeholder="Client email"></div>
      <div class="col"><label>Survey Date</label><input type="date" id="surveyDate"></div>
      <div class="col"><label>Install Date</label><input type="date" id="installDate"></div>
    </div>

    <h2 class="section-title">Products / works</h2>
    <div class="table-wrap">
      <table id="productsTable">
        <thead>
          <tr>
            <th>Product</th><th>Size m²</th><th>£ / m²</th><th>Total £</th><th></th>
          </tr>
        </thead>
        <tbody id="productsBody">
          <tr>
            <td>
              <select class="productSelect">
                <option value="">--select--</option>
                <option>Spray Foam Removal</option>
                <option>New Loft Insulation Install</option>
                <option>Loft Top-Up (270 mm)</option>
                <option>Loft Clearance / Preparation</option>
                <option>Loft Boarding</option>
                <option>Multifoil / TLX Silver / YBS SuperQuilt</option>
                <option>Pitched Roof Insulation</option>
                <option>Cavity Wall Extraction</option>
                <option>VCL / Membrane / Vapour Barrier</option>
              </select>
            </td>
            <td><input type="number" class="sizeInput" min="0" step="0.1" placeholder="m²"></td>
            <td><input type="number" class="unitInput" value="0" min="0" step="0.01" placeholder="£/m²"></td>
            <td><input type="text" class="lineTotal" value="0.00" readonly></td>
            <td><button type="button" class="secondary delRow">X</button></td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="btn-row"><button id="addProduct">+ Add Product</button></div>

    <div class="totals-terms-row">
      <div class="totals-box">
        <div><span>Sub Total</span><span id="subTotal">£0.00</span></div>
        <div><span>Discount</span><input type="number" id="discount" value="0"></div>
        <div><span>VAT 20%</span><span id="vatAmount">£0.00</span></div>
        <div><span>VAT On?</span><input type="checkbox" id="vatToggle" checked style="width:auto"></div>
        <div><span>Deposit</span><input type="number" id="deposit" value="0"></div>
        <div class="grand"><span>Total</span><span id="grandTotal">£0.00</span></div>
      </div>

      <div class="terms-inline">
        <strong>Terms &amp; Conditions (summary)</strong>
        1. Deposit on order, balance on completion unless agreed in writing.<br>
        2. Materials remain Warm Up UK Homes Ltd property until paid in full.<br>
        3. Client to provide safe, clear access to loft/roof on the install date.<br>
        4. Hidden or extra clearance / spray foam / non-standard prep may be chargeable.<br>
        5. Date changes inside 48 hrs can incur a lost-day / call-out fee.<br>
        6. Our install standards &amp; compliance requirements take priority.<br>
        7. Structural / damp / electrical issues are out of scope unless listed.<br>
        8. Client confirms authority to order and agrees to pay on completion.
      </div>
    </div>

    <div class="waiver" id="waiverBox">
      <div class="waiver-title">Customer waiver / variations</div>
      <p style="font-size:10.3px;margin:3px 0">
        I confirm the above works and authorise Warm Up UK Homes Ltd to proceed. Any additional clearance or non-standard loft condition may be chargeable.
      </p>
      <p style="font-size:10px;margin:3px 0">
        Express installs: where I request works to start within the 14-day cancellation period, I accept the express start waiver below.
      </p>
      <textarea id="waiverNotes" placeholder="Initials / special agreement..."></textarea>
      <div class="btn-row"><button id="expressBtn" style="background:var(--red)">+ EXPRESS FIT WAIVER</button></div>
    </div>

    <div class="page-break">
      <h2 class="section-title">Sign-off &amp; signatures</h2>
      <div class="signature-area">
        <div class="sig-box">
          <canvas class="sig-pad" id="sigCustomer"></canvas>
          <img id="sigCustomerImg" class="sig-img" alt="Customer Signature"/>
          <div class="sig-note">Customer signature</div>
          <input type="text" id="clientPrintedName" placeholder="Customer name (print)">
          <button type="button" class="secondary" onclick="clearPad('sigCustomer')">Clear</button>
        </div>
        <div class="sig-box">
          <canvas class="sig-pad" id="sigRep"></canvas>
          <img id="sigRepImg" class="sig-img" alt="Rep Signature"/>
          <div class="sig-note">Warm Up rep signature</div>
          <input type="text" id="repPrintedName" placeholder="Rep name (print)">
          <button type="button" class="secondary" onclick="clearPad('sigRep')">Clear</button>
        </div>
      </div>

      <h2 class="section-title">Notes</h2>
      <textarea id="notes" placeholder="Access, clearance, parking, ladders, hatch size, special instructions..."></textarea>
    </div>

    <div class="btn-row">
      <button id="generatePdf">Generate PDF</button>
      <button id="clearForm" class="secondary">Clear</button>
    </div>
  </div>
  <footer>WARM UP UK HOMES LIMITED</footer>
</div>

<script>
/* PRODUCT ROWS */
function createRow(){
  const tr=document.createElement('tr');
  tr.innerHTML=document.querySelector('#productsBody tr').innerHTML;
  return tr;
}
const bodyEl=document.getElementById('productsBody');
document.getElementById('addProduct').onclick=()=>{bodyEl.appendChild(createRow());};
bodyEl.addEventListener('input',recalc);
bodyEl.addEventListener('click',e=>{
  if(e.target.classList.contains('delRow')&&bodyEl.rows.length>1){
    e.target.closest('tr').remove();
    recalc();
  }
});
['discount','vatToggle','deposit'].forEach(id=>document.getElementById(id).addEventListener('input',recalc));

function recalc(){
  let subtotal=0;
  bodyEl.querySelectorAll('tr').forEach(tr=>{
    const size=parseFloat(tr.querySelector('.sizeInput').value)||0;
    const rate=parseFloat(tr.querySelector('.unitInput').value)||0;
    const total=size*rate;
    tr.querySelector('.lineTotal').value=total.toFixed(2);
    subtotal+=total;
  });
  document.getElementById('subTotal').textContent='£'+subtotal.toFixed(2);
  const discount=parseFloat(document.getElementById('discount').value)||0;
  const deposit=parseFloat
