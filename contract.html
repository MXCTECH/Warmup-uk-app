<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>WARM UP UK HOMES — Contract</title>
<meta name="color-scheme" content="dark" />

<style>
  :root{
    --bg:#0b0d12;
    --panel:#121212;
    --ink:#f7f7f7;
    --muted:#b6b6b6;
    --line:#222;
    --gold:#d4af37;
    --gold-soft:#ffd766;
    --radius:16px;
    --shadow:0 10px 28px rgba(0,0,0,.55);
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background:var(--bg);
    color:var(--ink);
    font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    line-height:1.45;
  }
  a{color:var(--gold); text-decoration:none}

  /* Header */
  header{
    position:sticky; top:0; z-index:2;
    color:var(--ink);
    border-bottom:1px solid var(--line);
    background:
      linear-gradient(180deg, rgba(212,175,55,.18), rgba(212,175,55,0) 70%),
      var(--panel);
    box-shadow:var(--shadow);
  }
  .wrap{max-width:1100px; margin:auto; padding:18px 18px}
  .head{display:flex; align-items:center; gap:14px}
  .brand{display:flex; align-items:center; gap:14px}
  .brand img{
    width:auto; height:48px; flex:0 0 48px;
    border-radius:10px; background:#000;
    object-fit:contain;
  }
  .brand h1{
    margin:0; letter-spacing:.12em;
    font-size:22px; font-weight:800;
  }
  .head-actions{margin-left:auto; display:flex; gap:10px}
  .btn{
    appearance:none; border:1px solid #3a3a3a; color:#111;
    background:linear-gradient(180deg, var(--gold-soft), var(--gold));
    border-radius:12px; padding:10px 14px; font-weight:700; cursor:pointer;
  }

  /* Cards */
  .card{
    background:var(--panel);
    border:1px solid var(--line);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    padding:18px;
    margin:18px auto;
    max-width:1100px;
  }
  .card h2{
    margin:0 0 14px; color:var(--gold); letter-spacing:.12em; font-size:20px;
  }
  .row{display:grid; gap:12px; grid-template-columns:1fr 1fr}
  @media (max-width:800px){ .row{grid-template-columns:1fr} }

  label{display:block; font-size:.95rem; color:var(--muted); margin:4px 0 6px}
  input[type="text"], input[type="tel"], input[type="date"], input[type="number"], textarea, select{
    width:100%; padding:14px 14px; border-radius:12px;
    background:#0f0f0f; color:var(--ink); border:1px solid #2b2b2b;
    outline:none; font-size:16px;
  }
  textarea{min-height:120px; resize:vertical}
  .lg input, .lg select{padding:18px 16px; font-size:18px}

  .table{width:100%; border-collapse:separate; border-spacing:0 10px}
  .table th{color:var(--muted); font-weight:600; text-align:left; padding:0 8px 6px}
  .table td{padding:0 8px}
  .qty, .unit, .line{width:110px}
  .num{ text-align:right }

  .pill{
    display:inline-flex; align-items:center; gap:10px;
    background:#0f0f0f; border:1px solid #2b2b2b; padding:10px 12px; border-radius:12px;
    color:var(--ink);
  }
  .pill input[type="checkbox"]{width:18px; height:18px; accent-color:var(--gold);}

  .totals{display:grid; gap:10px; grid-template-columns:1fr 1fr}
  @media (max-width:800px){ .totals{grid-template-columns:1fr} }
  .totalbox{
    border:1px dashed #3a3a3a; border-radius:12px; padding:12px 14px; background:#0f0f0f;
  }
  .totalbox strong{float:right}
  .balance{font-size:1.2rem; color:var(--gold); border-style:solid; border-color:#3a3a3a}

  /* Signature */
  .sign-wrap{border:1px solid #2b2b2b; border-radius:12px; padding:12px; background:#0f0f0f}
  #sig{width:100%; height:180px; display:block; background:#0a0a0a; border-radius:8px}
  .sign-actions{display:flex; justify-content:flex-start; gap:10px; margin-top:10px}
  .btn-ghost{background:#1a1a1a; border:1px solid #333; color:#ddd}

  /* Footer */
  footer{
    max-width:1100px; margin:26px auto 60px; color:var(--muted);
    border-top:1px solid var(--line); padding-top:14px;
  }
  .office strong{color:var(--gold)}
</style>
</head>

<body>
  <!-- HEADER with logo -->
  <header>
    <div class="wrap head">
      <div class="brand">
        <!-- Make sure this image exists in your repo: /assets/wuuk-logo.png -->
        <img src="assets/wuuk-logo.png" alt="Warm Up UK Homes logo" onerror="this.style.display='none'">
        <div>
          <h1>WARM UP UK HOMES</h1>
          <small>Contract Builder</small>
        </div>
      </div>
      <div class="head-actions">
        <button class="btn" id="btnPrint">Print / Save PDF</button>
        <button class="btn" id="btnWA">Share via WhatsApp</button>
      </div>
    </div>
  </header>

  <!-- CLIENT & JOB DETAILS (larger name + date) -->
  <section class="card">
    <h2>CLIENT &amp; JOB DETAILS</h2>
    <div class="row lg">
      <div>
        <label for="client">Client name</label>
        <input id="client" type="text" placeholder="Full name"/>
      </div>
      <div>
        <label for="phone">Contact number (WhatsApp)</label>
        <input id="phone" type="tel" placeholder="+44... or 07..."/>
      </div>
      <div style="grid-column:1 / -1">
        <label for="address">Property address</label>
        <input id="address" type="text" placeholder="Address, Postcode"/>
      </div>
      <div>
        <label for="rep">Rep</label>
        <input id="rep" type="text" placeholder="Rep name"/>
      </div>
      <div>
        <label for="job">Job type</label>
        <select id="job">
          <option>Loft Insulation</option>
          <option>Cavity Wall Insulation</option>
          <option>Underfloor Insulation</option>
          <option>Multifoil Insulation</option>
        </select>
      </div>
      <div>
        <label for="date">Date</label>
        <input id="date" type="date"/>
      </div>
    </div>
  </section>

  <!-- PRODUCTS & PRICING -->
  <section class="card">
    <h2>PRODUCTS &amp; PRICING</h2>

    <table class="table" id="lines">
      <thead>
        <tr>
          <th>Description</th>
          <th class="qty">Qty</th>
          <th class="unit">Unit £</th>
          <th class="line">Line £</th>
          <th></th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <div style="display:flex; gap:10px; margin-top:6px">
      <button class="btn-ghost" id="addLine">+ Add line</button>
      <label class="pill" title="Apply VAT at 20%">
        <input id="vatToggle" type="checkbox">
        <span>Apply VAT (20%)</span>
      </label>
    </div>

    <div class="totals" style="margin-top:12px">
      <div class="totalbox">Subtotal <strong id="subtotal">£0.00</strong></div>
      <div class="totalbox">VAT (20%) <strong id="vat">£0.00</strong></div>
      <div class="totalbox">Total <strong id="total">£0.00</strong></div>
      <div>
        <label for="deposit">Deposit £</label>
        <input id="deposit" type="number" min="0" value="0" step="0.01"/>
      </div>
      <div class="totalbox balance" style="grid-column:1 / -1">Balance Due: <strong id="balance">£0.00</strong></div>
    </div>
  </section>

  <!-- NOTES -->
  <section class="card">
    <h2>NOTES / INSTRUCTIONS</h2>
    <textarea id="notes" placeholder="Write any installation notes or client instructions here..."></textarea>
  </section>

  <!-- SIGNATURE -->
  <section class="card">
    <h2>SIGNATURE</h2>
    <p>Client can sign below with their finger or mouse.</p>
    <div class="sign-wrap">
      <canvas id="sig"></canvas>
      <div class="sign-actions">
        <button class="btn-ghost" id="clearSig">Clear</button>
      </div>
    </div>
  </section>

  <!-- FOOTER (office details at the bottom) -->
  <footer class="wrap">
    <p class="office">
      <strong>Office</strong> · Fitzwilliam House, Middle Bank, Doncaster, England, DN4 5NG
      &nbsp;&nbsp;|&nbsp;&nbsp;
      <strong>Tel</strong> 07470 474 774
      &nbsp;&nbsp;|&nbsp;&nbsp;
      <strong>Email</strong> <a href="mailto:warmupuk@icloud.com">warmupuk@icloud.com</a>
    </p>
  </footer>

<script>
  // Helper format
  const £ = n => "£" + (Number(n||0).toFixed(2));

  // Lines table
  const tbody = document.querySelector('#lines tbody');
  const addLineBtn = document.getElementById('addLine');
  const vatToggle = document.getElementById('vatToggle');
  const subtotalEl = document.getElementById('subtotal');
  const vatEl = document.getElementById('vat');
  const totalEl = document.getElementById('total');
  const balanceEl = document.getElementById('balance');
  const depositEl = document.getElementById('deposit');

  function addLine(desc="", qty=1, unit=0){
    const tr = document.createElement('tr');

    const tdDesc = document.createElement('td');
    const sel = document.createElement('select');
    ['Loft insulation — sqm', 'Cavity insulation — m', 'Underfloor — sqm', 'Misc item'].forEach(t=>{
      const o=document.createElement('option'); o.textContent=t; sel.appendChild(o);
    });
    sel.value = desc || 'Loft insulation — sqm';
    tdDesc.appendChild(sel);

    const tdQty = document.createElement('td'); tdQty.className="qty";
    const inQty = document.createElement('input'); inQty.type='number'; inQty.min=0; inQty.step='1'; inQty.value=qty; inQty.className='num';
    tdQty.appendChild(inQty);

    const tdUnit = document.createElement('td'); tdUnit.className="unit";
    const inUnit = document.createElement('input'); inUnit.type='number'; inUnit.min=0; inUnit.step='0.01'; inUnit.value=unit; inUnit.className='num';
    tdUnit.appendChild(inUnit);

    const tdLine = document.createElement('td'); tdLine.className="line num";
    const inLine = document.createElement('input'); inLine.type='number'; inLine.readOnly=true; inLine.tabIndex=-1; inLine.className='num';
    tdLine.appendChild(inLine);

    const tdX = document.createElement('td');
    const xBtn = document.createElement('button'); xBtn.textContent='×'; xBtn.className='btn-ghost';
    xBtn.addEventListener('click', ()=>{ tr.remove(); recalc(); });
    tdX.appendChild(xBtn);

    [inQty, inUnit, sel].forEach(el=> el.addEventListener('input', recalc));

    tr.append(tdDesc, tdQty, tdUnit, tdLine, tdX);
    tbody.appendChild(tr);
    recalc();
  }

  function recalc(){
    let subtotal = 0;
    tbody.querySelectorAll('tr').forEach(tr=>{
      const qty  = Number(tr.querySelector('.qty input').value||0);
      const unit = Number(tr.querySelector('.unit input').value||0);
      const line = qty * unit;
      tr.querySelector('.line input').value = line.toFixed(2);
      subtotal += line;
    });
    const vat = vatToggle.checked ? subtotal * 0.20 : 0;
    const total = subtotal + vat;
    const deposit = Number(depositEl.value||0);
    const balance = Math.max(total - deposit, 0);

    subtotalEl.textContent = £(subtotal);
    vatEl.textContent = £(vat);
    totalEl.textContent = £(total);
    balanceEl.textContent = £(balance);
  }

  addLineBtn.addEventListener('click', ()=>addLine());
  vatToggle.addEventListener('change', recalc);
  depositEl.addEventListener('input', recalc);

  // Start with one line
  addLine('Loft insulation — sqm', 1, 0);

  // Signature pad (simple)
  const canvas = document.getElementById('sig');
  const ctx = canvas.getContext('2d');
  const clearSig = document.getElementById('clearSig');
  function sizeCanvas(){
    const r = canvas.getBoundingClientRect();
    canvas.width = r.width * window.devicePixelRatio;
    canvas.height = r.height * window.devicePixelRatio;
    ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
    ctx.lineWidth = 2; ctx.lineJoin = 'round'; ctx.lineCap = 'round'; ctx.strokeStyle = '#ffd766';
  }
  sizeCanvas(); addEventListener('resize', sizeCanvas);

  let drawing=false, prev=null;
  function pos(e){
    const b = canvas.getBoundingClientRect();
    const x = (e.touches?e.touches[0].clientX:e.clientX) - b.left;
    const y = (e.touches?e.touches[0].clientY:e.clientY) - b.top;
    return {x,y};
  }
  function start(e){ drawing=true; prev=pos(e); e.preventDefault(); }
  function move(e){
    if(!drawing) return;
    const p = pos(e);
    ctx.beginPath(); ctx.moveTo(prev.x, prev.y); ctx.lineTo(p.x, p.y); ctx.stroke();
    prev = p; e.preventDefault();
  }
  function end(){ drawing=false; }
  canvas.addEventListener('mousedown', start);
  canvas.addEventListener('mousemove', move);
  addEventListener('mouseup', end);
  canvas.addEventListener('touchstart', start, {passive:false});
  canvas.addEventListener('touchmove', move, {passive:false});
  canvas.addEventListener('touchend', end);

  clearSig.addEventListener('click', ()=>{
    ctx.clearRect(0,0,canvas.width,canvas.height);
  });

  // Buttons
  document.getElementById('btnPrint').addEventListener('click', ()=>window.print());
  document.getElementById('btnWA').addEventListener('click', ()=>{
    const msg = `WARM UP UK HOMES — Contract
Client: ${document.getElementById('client').value||''}
Address: ${document.getElementById('address').value||''}
Job: ${document.getElementById('job').value||''}
Total: ${document.getElementById('total').textContent}
Deposit: £${Number(document.getElementById('deposit').value||0).toFixed(2)}
Balance: ${document.getElementById('balance').textContent}
Notes: ${document.getElementById('notes').value||''}`;
    const url = 'https://wa.me/?text=' + encodeURIComponent(msg);
    window.open(url, '_blank');
  });

  // Default date = today
  (function setToday(){
    const d = new Date();
    const iso = d.toISOString().slice(0,10);
    document.getElementById('date').value = iso;
  })();
</script>
</body>
</html>
