<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>WARM UP UK HOMES — Contract</title>

<style>
:root{
  --bg:#0b0d12;
  --panel:#121212;
  --ink:#e7e8ea;
  --muted:#909090;
  --gold:#d4af37;
  --gold-soft:#ffd766;
  --line:#222;
  --radius:16px;
  --shadow:0 10px 28px rgba(0,0,0,.55);
  --sans: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:var(--sans);
  color:var(--ink);
  background:linear-gradient(180deg, #111 0%, #0b0d12 100%);
}

a{color:var(--gold); text-decoration:none}
small, .muted{color:var(--muted)}

.wrap{max-width:1100px; margin:0 auto; padding:24px}

header{
  position:sticky; top:0; z-index:5;
  background:linear-gradient(180deg, rgba(212,175,55,.18), rgba(212,175,55,.05));
  border:1px solid rgba(212,175,55,.28);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:18px 18px 12px;
  margin:16px auto 24px;
}
.head{display:flex; align-items:center; gap:16px}
.brand{display:flex; align-items:center; gap:14px; min-height:56px}
.brand img{height:40px; width:auto; display:block; object-fit:contain}
.brand h1{font-size:24px; margin:0; letter-spacing:.12em}
.actions{margin-left:auto; display:flex; gap:10px; flex-wrap:wrap}
.btn{
  appearance:none; border:1px solid rgba(212,175,55,.35);
  background:linear-gradient(180deg, rgba(212,175,55,.35), rgba(212,175,55,.15));
  color:#111; font-weight:700; padding:10px 14px; border-radius:12px;
  cursor:pointer; box-shadow:var(--shadow); color:#000;
}
.btn.secondary{background:transparent; color:var(--ink)}
.btn:active{transform:translateY(1px)}

.card{
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:20px;
  margin:0 0 18px;
}

h2{font-size:20px; letter-spacing:.18em; color:var(--gold); margin:0 0 12px}
label{display:block; margin:10px 0 6px; color:var(--muted)}
input, select, textarea{
  width:100%; background:#0f0f10; color:var(--ink); border:1px solid #2a2a2a;
  padding:14px 12px; border-radius:12px; outline:none; font-size:16px;
}
input:focus, select:focus, textarea:focus{border-color:#3b3b3b; box-shadow:0 0 0 3px rgba(212,175,55,.15)}
textarea{min-height:120px; resize:vertical}

/* Larger key fields */
input.big{padding:16px 14px; font-size:18px}

/* Grid helpers */
.row{display:grid; gap:12px}
.row.cols-2{grid-template-columns:1fr 1fr}
.row.cols-3{grid-template-columns:2fr 1fr 1fr}
@media (max-width:760px){ .row.cols-2, .row.cols-3{grid-template-columns:1fr} }

/* Products table style */
.table{display:grid; gap:10px}
.table .thead, .table .line{display:grid; grid-template-columns:2.2fr .8fr .8fr .8fr 40px; gap:10px; align-items:center}
.table .thead{color:var(--muted); font-size:14px}
.table .line input{width:100%}
.table .remove{
  width:40px; height:40px; border-radius:12px; border:1px solid #333;
  background:#151515; color:#eee; cursor:pointer
}
.add-line{justify-self:start}

/* Totals area */
.pill{
  display:inline-flex; align-items:center; gap:10px;
  padding:10px 14px; border:1px dashed #2e2e2e; border-radius:999px; background:#0f0f10;
}
.pill input[type="checkbox"]{width:18px; height:18px; accent-color:var(--gold); cursor:pointer}

.sumline{
  display:flex; align-items:center; justify-content:space-between;
  background:#0e0e10; border:1px solid #2a2a2a; padding:16px 14px; border-radius:12px; font-weight:700
}
.balance{color:var(--gold); font-size:22px; letter-spacing:.04em}

/* Signature pad */
.sig-wrap{border:1px solid #2a2a2a; border-radius:12px; background:#0e0e10; padding:12px}
canvas#sig{width:100%; height:240px; background:#0a0a0a; border-radius:8px; touch-action:none}
.sig-tools{display:flex; gap:10px; margin-top:8px}

/* Footer with logo bottom */
footer{
  margin:28px auto 40px; text-align:center; color:var(--muted);
}
.footer-box{
  background:#0f0f10; border:1px solid #2a2a2a; border-radius:var(--radius);
  padding:16px; display:flex; align-items:center; justify-content:center; gap:14px;
}
footer img{height:26px; width:auto; object-fit:contain}
</style>
</head>

<body>
<div class="wrap">

  <!-- Header -->
  <header>
    <div class="head">
      <div class="brand">
        <!-- TOP LOGO — make sure this file exists: /assets/wuuk-logo.png -->
        <img src="assets/wuuk-logo.png" alt="Warm Up UK Homes logo" onerror="this.style.display='none'">
        <h1>WARM UP UK HOMES</h1>
      </div>
      <div class="actions">
        <button class="btn" id="btnPrint">Print / Save PDF</button>
        <button class="btn secondary" id="btnShare">Share via WhatsApp</button>
      </div>
    </div>
  </header>

  <!-- Contract Meta -->
  <section class="card">
    <div class="row cols-2">
      <div>
        <label>Contract Number</label>
        <input id="contractNo" class="big" placeholder="WUUK-YYYYMMDD-XXXX">
      </div>
      <div>
        <label>Date</label>
        <input id="date" type="date" class="big">
      </div>
    </div>
  </section>

  <!-- Client & Job Details -->
  <section class="card">
    <h2>CLIENT &amp; JOB DETAILS</h2>
    <div class="row cols-1">
      <div>
        <label>Client name</label>
        <input id="client" class="big" placeholder="Full name">
      </div>
    </div>

    <div class="row cols-2">
      <div>
        <label>Contact number (WhatsApp)</label>
        <input id="phone" inputmode="tel" placeholder="+44... or 07...">
      </div>
      <div>
        <label>Rep</label>
        <input id="rep" placeholder="Rep name">
      </div>
    </div>

    <div class="row cols-1">
      <div>
        <label>Property address</label>
        <input id="address" placeholder="Address, Postcode">
      </div>
    </div>

    <div class="row cols-2">
      <div>
        <label>Job type</label>
        <select id="job">
          <option>Loft Insulation</option>
          <option>Spray Foam Removal</option>
          <option>Cavity Wall Insulation</option>
          <option>Underfloor Insulation</option>
        </select>
      </div>
      <div>
        <label>Date of install</label>
        <input id="installDate" type="date">
      </div>
    </div>
  </section>

  <!-- Products & Pricing -->
  <section class="card">
    <h2>PRODUCTS &amp; PRICING</h2>

    <div class="table">
      <div class="thead">
        <div>Description</div><div>Qty</div><div>Unit £</div><div>Line £</div><div></div>
      </div>

      <!-- lines container -->
      <div id="lines"></div>

      <button class="btn add-line" id="btnAdd">+ Add line</button>
    </div>

    <div style="margin:16px 0">
      <label class="pill">
        <input type="checkbox" id="vatToggle" checked>
        <span>Apply VAT (20%)</span>
      </label>
    </div>

    <div class="row cols-1" style="margin-top:6px">
      <div class="sumline"><span>Subtotal</span><span id="subtotal">£0.00</span></div>
      <div class="sumline"><span>VAT (20%)</span><span id="vat">£0.00</span></div>
      <div class="sumline"><span>Total</span><span id="total">£0.00</span></div>
    </div>

    <div class="row cols-2" style="margin-top:12px">
      <div>
        <label>Deposit £</label>
        <input id="deposit" value="0" inputmode="decimal">
      </div>
      <div class="sumline" style="align-self:end">
        <span>Balance Due:</span>
        <span class="balance" id="balance">£0.00</span>
      </div>
    </div>
  </section>

  <!-- Notes -->
  <section class="card">
    <h2>NOTES / INSTRUCTIONS</h2>
    <textarea id="notes" placeholder="Write any installation notes or client instructions here..."></textarea>
  </section>

  <!-- Signature -->
  <section class="card">
    <h2>SIGNATURE</h2>
    <p class="muted">Client can sign below with their finger or mouse.</p>
    <div class="sig-wrap">
      <canvas id="sig"></canvas>
      <div class="sig-tools">
        <button class="btn secondary" id="btnClear">Clear</button>
      </div>
    </div>
  </section>

  <!-- Footer with office details + bottom logo -->
  <footer>
    <div class="footer-box">
      <img src="assets/wuuk-logo.png" alt="WUUK" onerror="this.style.display='none'">
      <div>
        <strong>WARM UP UK HOMES</strong><br>
        Fitzwilliam House, Middle Bank, Doncaster, England, DN4 5NG ·
        Tel <a href="tel:+447470474774">07470 474 774</a> ·
        Email <a href="mailto:warmupuk@icloud.com">warmupuk@icloud.com</a>
      </div>
    </div>
  </footer>

</div>

<script>
/* ---- helpers ---- */
const el = id => document.getElementById(id);
const fmt = n => '£' + (Number(n)||0).toFixed(2);

/* ---- contract number + date ---- */
(function initMeta(){
  const now = new Date();
  el('date').valueAsDate = now;
  const y = now.getFullYear();
  const m = String(now.getMonth()+1).padStart(2,'0');
  const d = String(now.getDate()).padStart(2,'0');
  const suffix = Math.random().toString(36).slice(2,6).toUpperCase();
  el('contractNo').value = `WUUK-${y}${m}${d}-${suffix}`;
})();

/* ---- product lines ---- */
const lines = el('lines');
function makeLine(desc='', qty=1, unit=0){
  const row = document.createElement('div');
  row.className = 'line';
  row.innerHTML = `
    <input class="desc" placeholder="Description" value="${desc}">
    <input class="qty" inputmode="decimal" value="${qty}">
    <input class="unit" inputmode="decimal" value="${unit}">
    <input class="total" inputmode="decimal" value="0" readonly>
    <button class="remove" title="Remove">×</button>
  `;
  row.addEventListener('input', sync);
  row.querySelector('.remove').addEventListener('click', ()=>{ row.remove(); sync(); });
  lines.appendChild(row);
  sync();
}
el('btnAdd').addEventListener('click', ()=> makeLine('Loft insulation — s',1,0));

/* start with a single line */
makeLine('Loft insulation — s', 1, 0);

/* ---- calc ---- */
function sync(){
  let sub = 0;
  lines.querySelectorAll('.line').forEach(line=>{
    const qty  = Number(line.querySelector('.qty').value)||0;
    const unit = Number(line.querySelector('.unit').value)||0;
    const total = qty * unit;
    line.querySelector('.total').value = total.toFixed(2);
    sub += total;
  });
  const takeVAT = el('vatToggle').checked;
  const vatAmt = takeVAT ? sub * 0.20 : 0;
  const total = sub + vatAmt;
  const dep = Number(el('deposit').value)||0;
  const bal = Math.max(total - dep, 0);

  el('subtotal').textContent = fmt(sub);
  el('vat').textContent      = fmt(vatAmt);
  el('total').textContent    = fmt(total);
  el('balance').textContent  = fmt(bal);
}
['deposit','vatToggle'].forEach(id=> el(id).addEventListener('input', sync));

/* ---- signature pad (simple) ---- */
(function sigPad(){
  const c = el('sig');
  const ctx = c.getContext('2d');
  let drawing = false, lastX=0, lastY=0;

  function size(){
    const r = c.getBoundingClientRect();
    const dpr = window.devicePixelRatio || 1;
    c.width = Math.floor(r.width * dpr);
    c.height = Math.floor(r.height * dpr);
    ctx.scale(dpr,dpr);
    ctx.lineWidth = 2.2;
    ctx.lineJoin = 'round';
    ctx.lineCap = 'round';
    ctx.strokeStyle = '#fff';
  }
  size(); addEventListener('resize', size);

  function start(x,y){ drawing = true; [lastX,lastY] = [x,y]; }
  function move(x,y){
    if(!drawing) return;
    ctx.beginPath();
    ctx.moveTo(lastX,lastY);
    ctx.lineTo(x,y);
    ctx.stroke();
    [lastX,lastY] = [x,y];
  }
  function stop(){ drawing=false; }

  c.addEventListener('pointerdown', e=>{ c.setPointerCapture(e.pointerId); start(e.offsetX, e.offsetY); });
  c.addEventListener('pointermove', e=> move(e.offsetX, e.offsetY));
  c.addEventListener('pointerup', stop);
  c.addEventListener('pointercancel', stop);

  el('btnClear').addEventListener('click', ()=>{
    ctx.clearRect(0,0,c.width,c.height);
  });
})();

/
